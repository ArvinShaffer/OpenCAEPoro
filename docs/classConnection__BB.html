<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCAEPoro: Connection_BB Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCAEPoro<span id="projectnumber">&#160;0.1.0 Oct/15/2021</span>
   </div>
   <div id="projectbrief">OpenCAE for multicomponent porous media flow</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classConnection__BB-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Connection_BB Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="BulkConn_8hpp_source.html">BulkConn.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaaeafea1f51353ae916a792af1069ea6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#aaaeafea1f51353ae916a792af1069ea6">GetConnectionInfo</a> () const</td></tr>
<tr class="memdesc:aaaeafea1f51353ae916a792af1069ea6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print information about connection on screen.  <a href="classConnection__BB.html#aaaeafea1f51353ae916a792af1069ea6">More...</a><br /></td></tr>
<tr class="separator:aaaeafea1f51353ae916a792af1069ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4c0f85f6bcff384909ff5e7ee40b400"><td class="memItemLeft" align="right" valign="top"><a class="el" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#ae4c0f85f6bcff384909ff5e7ee40b400">GetBulkNum</a> () const</td></tr>
<tr class="memdesc:ae4c0f85f6bcff384909ff5e7ee40b400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return num of bulk.  <a href="classConnection__BB.html#ae4c0f85f6bcff384909ff5e7ee40b400">More...</a><br /></td></tr>
<tr class="separator:ae4c0f85f6bcff384909ff5e7ee40b400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8599ec24cd2d6b177078ce6ee8c21986"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a8599ec24cd2d6b177078ce6ee8c21986">Setup</a> (const <a class="el" href="classGrid.html">Grid</a> &amp;myGrid, const <a class="el" href="classBulk.html">Bulk</a> &amp;myBulk)</td></tr>
<tr class="separator:a8599ec24cd2d6b177078ce6ee8c21986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6c75a707ee687ca153e0761c9b989b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a6e6c75a707ee687ca153e0761c9b989b">InitSize</a> (const <a class="el" href="classBulk.html">Bulk</a> &amp;myBulk)</td></tr>
<tr class="memdesc:a6e6c75a707ee687ca153e0761c9b989b"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the size of variable related to neighbor.  <a href="classConnection__BB.html#a6e6c75a707ee687ca153e0761c9b989b">More...</a><br /></td></tr>
<tr class="separator:a6e6c75a707ee687ca153e0761c9b989b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a8f92e38ea4c72ea39dd02f474327ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a1a8f92e38ea4c72ea39dd02f474327ad">CalConn</a> (const <a class="el" href="classGrid.html">Grid</a> &amp;myGrid, const <a class="el" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> &amp;np)</td></tr>
<tr class="memdesc:a1a8f92e38ea4c72ea39dd02f474327ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup variable related to neighbor.  <a href="classConnection__BB.html#a1a8f92e38ea4c72ea39dd02f474327ad">More...</a><br /></td></tr>
<tr class="separator:a1a8f92e38ea4c72ea39dd02f474327ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7caa97f3a69a49a6104a474b2155161"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#ad7caa97f3a69a49a6104a474b2155161">CalIteratorConn</a> ()</td></tr>
<tr class="memdesc:ad7caa97f3a69a49a6104a474b2155161"><td class="mdescLeft">&#160;</td><td class="mdescRight">generate iteratorConn of active connections from neighbor.  <a href="classConnection__BB.html#ad7caa97f3a69a49a6104a474b2155161">More...</a><br /></td></tr>
<tr class="separator:ad7caa97f3a69a49a6104a474b2155161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571788b0cc6cc2d1e212c145d7bbdaf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a571788b0cc6cc2d1e212c145d7bbdaf1">CalArea</a> (const <a class="el" href="classGrid.html">Grid</a> &amp;myGrid, const <a class="el" href="classBulk.html">Bulk</a> &amp;myBulk)</td></tr>
<tr class="memdesc:a571788b0cc6cc2d1e212c145d7bbdaf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate all effective area of connections.  <a href="classConnection__BB.html#a571788b0cc6cc2d1e212c145d7bbdaf1">More...</a><br /></td></tr>
<tr class="separator:a571788b0cc6cc2d1e212c145d7bbdaf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d58ba9002c447acde254e60b63374a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a92d58ba9002c447acde254e60b63374a">CalAkd</a> (const <a class="el" href="classGrid.html">Grid</a> &amp;myGrid, const <a class="el" href="classBulk.html">Bulk</a> &amp;myBulk, const <a class="el" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> &amp;bIdb, const <a class="el" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> &amp;eIdb) const</td></tr>
<tr class="memdesc:a92d58ba9002c447acde254e60b63374a"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate effective area of connections.  <a href="classConnection__BB.html#a92d58ba9002c447acde254e60b63374a">More...</a><br /></td></tr>
<tr class="separator:a92d58ba9002c447acde254e60b63374a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31d67e88a223ea350e6dc2df098218ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a31d67e88a223ea350e6dc2df098218ee">CalCFL</a> (const <a class="el" href="classBulk.html">Bulk</a> &amp;myBulk, const <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &amp;dt) const</td></tr>
<tr class="memdesc:a31d67e88a223ea350e6dc2df098218ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate the CFL number of flow between bulks.  <a href="classConnection__BB.html#a31d67e88a223ea350e6dc2df098218ee">More...</a><br /></td></tr>
<tr class="separator:a31d67e88a223ea350e6dc2df098218ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef278d97aa292fa4ecbb634a545a88b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#aef278d97aa292fa4ecbb634a545a88b0">CalFlux</a> (const <a class="el" href="classBulk.html">Bulk</a> &amp;myBulk)</td></tr>
<tr class="memdesc:aef278d97aa292fa4ecbb634a545a88b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate main information about flow between bulks.  <a href="classConnection__BB.html#aef278d97aa292fa4ecbb634a545a88b0">More...</a><br /></td></tr>
<tr class="separator:aef278d97aa292fa4ecbb634a545a88b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7ba04ea7dca24bcde7b419501c3f338"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#ab7ba04ea7dca24bcde7b419501c3f338">MassConserve</a> (<a class="el" href="classBulk.html">Bulk</a> &amp;myBulk, const <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &amp;dt) const</td></tr>
<tr class="separator:ab7ba04ea7dca24bcde7b419501c3f338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d12c0fb81505cf34a8c1f40af5a31d"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a44d12c0fb81505cf34a8c1f40af5a31d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a44d12c0fb81505cf34a8c1f40af5a31d">AllocateMat</a> (<a class="el" href="classSolver.html">Solver</a>&lt; T &gt; &amp;mySolver) const</td></tr>
<tr class="memdesc:a44d12c0fb81505cf34a8c1f40af5a31d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory for Matrix, it should be called only once at the beginning.  <a href="classConnection__BB.html#a44d12c0fb81505cf34a8c1f40af5a31d">More...</a><br /></td></tr>
<tr class="separator:a44d12c0fb81505cf34a8c1f40af5a31d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc6c281ce0ce52fc3ae248503aec285"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a4dc6c281ce0ce52fc3ae248503aec285"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a4dc6c281ce0ce52fc3ae248503aec285">InitAssembleMat</a> (<a class="el" href="classSolver.html">Solver</a>&lt; T &gt; &amp;mySolver) const</td></tr>
<tr class="separator:a4dc6c281ce0ce52fc3ae248503aec285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d18ea8aed0d42c6d9b5696a4eef900"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a02d18ea8aed0d42c6d9b5696a4eef900">AssembleMat_IMPES</a> (<a class="el" href="classSolver.html">Solver</a>&lt; <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &gt; &amp;mySolver, const <a class="el" href="classBulk.html">Bulk</a> &amp;myBulk, const <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &amp;dt) const</td></tr>
<tr class="memdesc:a02d18ea8aed0d42c6d9b5696a4eef900"><td class="mdescLeft">&#160;</td><td class="mdescRight">assmeble Matrix, parts only related to bulks are considered.  <a href="classConnection__BB.html#a02d18ea8aed0d42c6d9b5696a4eef900">More...</a><br /></td></tr>
<tr class="separator:a02d18ea8aed0d42c6d9b5696a4eef900"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a9207bec5c987e07946dc1af861cd98c0"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConnection__BB.html#a9207bec5c987e07946dc1af861cd98c0">Solver&lt; OCP_DBL &gt;</a></td></tr>
<tr class="separator:a9207bec5c987e07946dc1af861cd98c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p ><a class="el" href="classConnection__BB.html">Connection_BB</a> is a core component of reservoir, it contains all properties and operations about connections between bulks(active grids). due to the activity of bulks, almost all connections are meaningful. you can traverse all the connections through the iterator in it, which is effective. flow calculation between active bulks, matrix assembling contributed only by bulks are included in it. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8hpp_source.html#l00047">47</a> of file <a class="el" href="BulkConn_8hpp_source.html">BulkConn.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a44d12c0fb81505cf34a8c1f40af5a31d" name="a44d12c0fb81505cf34a8c1f40af5a31d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d12c0fb81505cf34a8c1f40af5a31d">&#9670;&nbsp;</a></span>AllocateMat()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::AllocateMat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSolver.html">Solver</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>mySolver</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate memory for Matrix, it should be called only once at the beginning. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8hpp_source.html#l00121">121</a> of file <a class="el" href="BulkConn_8hpp_source.html">BulkConn.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>{</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> n = 0; n &lt; numBulk; n++) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        MySolver.rowCapacity[n] += neighborNum[n];</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    }</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>}</div>
<div class="ttc" id="aOCPConst_8hpp_html_a9951229752a2a6a4f40b81a78fad737b"><div class="ttname"><a href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a></div><div class="ttdeci">unsigned int OCP_USI</div><div class="ttdoc">Long unsigned integer.</div><div class="ttdef"><b>Definition:</b> <a href="OCPConst_8hpp_source.html#l00028">OCPConst.hpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02d18ea8aed0d42c6d9b5696a4eef900" name="a02d18ea8aed0d42c6d9b5696a4eef900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02d18ea8aed0d42c6d9b5696a4eef900">&#9670;&nbsp;</a></span>AssembleMat_IMPES()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::AssembleMat_IMPES </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSolver.html">Solver</a>&lt; <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>mySolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &amp;&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>assmeble Matrix, parts only related to bulks are considered. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00309">309</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>{</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="comment">// accumulate term</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> Vp0, Vp, vf, vfp, P;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> cr = myBulk.rockC1;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> n = 0; n &lt; numBulk; n++) {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        Vp0 = myBulk.rockVpInit[n];</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        Vp  = myBulk.rockVp[n];</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        vfp = myBulk.vfp[n];</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        P   = myBulk.P[n];</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        vf  = myBulk.vf[n];</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> temp        = cr * Vp0 - vfp;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        mySolver.diagVal[n] = temp;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        mySolver.b[n]       = temp * P + dt * (vf - Vp);</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    }</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="comment">// check</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="comment">// ofstream outb(&quot;testb.dat&quot;);</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="comment">// if (!outb.is_open())</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="comment">//  cout &lt;&lt; &quot;Can not open &quot; &lt;&lt; &quot;testb.dat&quot; &lt;&lt; endl;</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="comment">// outb &lt;&lt; mySolver.dim &lt;&lt; endl;</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <span class="comment">// for (int i = 0; i &lt; mySolver.dim; i++)</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="comment">//  outb &lt;&lt; mySolver.b[i] &lt;&lt; endl;</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <span class="comment">// outb.close();</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="comment">// flux term</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bId, eId, uId;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     np = myBulk.numPhase;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     nc = myBulk.numCom;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> valupi, valdowni;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> valup, rhsup, valdown, rhsdown;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="comment">// OCP_USI    lastbId = -1;</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> lastbId = iteratorConn[0].EId;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> c = 0; c &lt; numConn; c++) {</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        bId     = iteratorConn[c].BId;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        eId     = iteratorConn[c].EId;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        valup   = 0;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        rhsup   = 0;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        valdown = 0;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        rhsdown = 0;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> j = 0; j &lt; np; j++) {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            uId = upblock[c * np + j];</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <span class="keywordflow">if</span> (!myBulk.phaseExist[uId * np + j]) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            valupi   = 0;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            valdowni = 0;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> i = 0; i &lt; nc; i++) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>                valupi +=</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                    myBulk.vfi[bId * nc + i] * myBulk.cij[uId * np * nc + j * nc + i];</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                valdowni +=</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>                    myBulk.vfi[eId * nc + i] * myBulk.cij[uId * np * nc + j * nc + i];</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>            }</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> dD   = myBulk.depth[bId] - myBulk.depth[eId];</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> dPc  = myBulk.Pc[bId * np + j] - myBulk.Pc[eId * np + j];</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> temp = myBulk.xi[uId * np + j] * upblock_Trans[c * np + j] * dt;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            valup += temp * valupi;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            valdown += temp * valdowni;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            temp *= upblock_Rho[c * np + j] * GRAVITY_FACTOR * dD - dPc;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            rhsup += temp * valupi;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            rhsdown -= temp * valdowni;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        }</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span> </div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> diagptr = selfPtr[bId];</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="keywordflow">if</span> (bId != lastbId) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>            <span class="comment">// new bulk</span></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            assert(mySolver.val[bId].size() == diagptr);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            mySolver.val[bId].push_back(mySolver.diagVal[bId]);</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>            lastbId = bId;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        mySolver.val[bId][diagptr] += valup;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        mySolver.val[bId].push_back(-valup);</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        mySolver.val[eId].push_back(-valdown);</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        mySolver.diagVal[eId] += valdown;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        mySolver.b[bId] += rhsup;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        mySolver.b[eId] += rhsdown;</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    }</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span> </div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="comment">// Add the rest of diag value</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="comment">// important!</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> n = 0; n &lt; numBulk; n++) {</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="keywordflow">if</span> (mySolver.val[n].size() == selfPtr[n])</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>            mySolver.val[n].push_back(mySolver.diagVal[n]);</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>}</div>
<div class="ttc" id="aOCPConst_8hpp_html_a24bc11890ea853a38fd9d6b843633b1b"><div class="ttname"><a href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a></div><div class="ttdeci">unsigned int USI</div><div class="ttdoc">Unsigned integer.</div><div class="ttdef"><b>Definition:</b> <a href="OCPConst_8hpp_source.html#l00027">OCPConst.hpp:27</a></div></div>
<div class="ttc" id="aOCPConst_8hpp_html_a2c355586809161c6f4c3a35ebfa7cb1f"><div class="ttname"><a href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a></div><div class="ttdeci">double OCP_DBL</div><div class="ttdoc">Double precision.</div><div class="ttdef"><b>Definition:</b> <a href="OCPConst_8hpp_source.html#l00030">OCPConst.hpp:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a92d58ba9002c447acde254e60b63374a" name="a92d58ba9002c447acde254e60b63374a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d58ba9002c447acde254e60b63374a">&#9670;&nbsp;</a></span>CalAkd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> Connection_BB::CalAkd </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGrid.html">Grid</a> &amp;&#160;</td>
          <td class="paramname"><em>myGrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> &amp;&#160;</td>
          <td class="paramname"><em>bIdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> &amp;&#160;</td>
          <td class="paramname"><em>eIdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate effective area of connections. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00165">165</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>{</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bIdg = myGrid.activeMap_B2G[bIdb];</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> eIdg = myGrid.activeMap_B2G[eIdb];</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#ae1557888748310c9f05f88c69bb30cc3">OCP_INT</a> diff = eIdg - bIdg;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="keywordflow">if</span> (diff &lt; 0) diff *= -1;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="keywordflow">if</span> (diff == 1) {</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <span class="comment">// x - direction</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> T1 = myBulk.rockKx[bIdb] * myBulk.ntg[bIdb] * myBulk.dy[bIdb] *</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                     myBulk.dz[bIdb] / myBulk.dx[bIdb];</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> T2 = myBulk.rockKx[eIdb] * myBulk.ntg[eIdb] * myBulk.dy[eIdb] *</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                     myBulk.dz[eIdb] / myBulk.dx[eIdb];</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>        <span class="keywordflow">return</span> (2 / (1 / T1 + 1 / T2));</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (diff == myGrid.nx) {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <span class="comment">// y - direction</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> T1 = myBulk.rockKy[bIdb] * myBulk.ntg[bIdb] * myBulk.dz[bIdb] *</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                     myBulk.dx[bIdb] / myBulk.dy[bIdb];</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> T2 = myBulk.rockKy[eIdb] * myBulk.ntg[eIdb] * myBulk.dz[eIdb] *</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>                     myBulk.dx[eIdb] / myBulk.dy[eIdb];</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="keywordflow">return</span> (2 / (1 / T1 + 1 / T2));</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (diff == myGrid.nx * myGrid.ny) {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="comment">// z - direction  ----  no ntg</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> T1 =</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            myBulk.rockKz[bIdb] * myBulk.dx[bIdb] * myBulk.dy[bIdb] / myBulk.dz[bIdb];</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> T2 =</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>            myBulk.rockKz[eIdb] * myBulk.dx[eIdb] * myBulk.dy[eIdb] / myBulk.dz[eIdb];</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <span class="keywordflow">return</span> (2 / (1 / T1 + 1 / T2));</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <span class="comment">// Wrong</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        ERRORcheck(<span class="stringliteral">&quot;Wrong bId and eId in function&quot;</span>);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        exit(0);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>}</div>
<div class="ttc" id="aOCPConst_8hpp_html_ae1557888748310c9f05f88c69bb30cc3"><div class="ttname"><a href="OCPConst_8hpp.html#ae1557888748310c9f05f88c69bb30cc3">OCP_INT</a></div><div class="ttdeci">int OCP_INT</div><div class="ttdoc">Long integer.</div><div class="ttdef"><b>Definition:</b> <a href="OCPConst_8hpp_source.html#l00029">OCPConst.hpp:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a571788b0cc6cc2d1e212c145d7bbdaf1" name="a571788b0cc6cc2d1e212c145d7bbdaf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a571788b0cc6cc2d1e212c145d7bbdaf1">&#9670;&nbsp;</a></span>CalArea()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::CalArea </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGrid.html">Grid</a> &amp;&#160;</td>
          <td class="paramname"><em>myGrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate all effective area of connections. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00149">149</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>{</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="comment">// calculate efficient area of interface of bulk to bulk</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="comment">// using iteratorConn</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    area.reserve(numConn);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> n = 0; n &lt; numConn; n++) {</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bIdb = iteratorConn[n].BId;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> eIdb = iteratorConn[n].EId;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <span class="comment">// area.push_back(1);</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        area.push_back(<a class="code hl_function" href="classConnection__BB.html#a92d58ba9002c447acde254e60b63374a">CalAkd</a>(myGrid, myBulk, bIdb, eIdb));</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    }</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    assert(area.size() == numConn);</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>}</div>
<div class="ttc" id="aclassConnection__BB_html_a92d58ba9002c447acde254e60b63374a"><div class="ttname"><a href="classConnection__BB.html#a92d58ba9002c447acde254e60b63374a">Connection_BB::CalAkd</a></div><div class="ttdeci">OCP_DBL CalAkd(const Grid &amp;myGrid, const Bulk &amp;myBulk, const OCP_USI &amp;bIdb, const OCP_USI &amp;eIdb) const</div><div class="ttdoc">calculate effective area of connections.</div><div class="ttdef"><b>Definition:</b> <a href="BulkConn_8cpp_source.html#l00165">BulkConn.cpp:165</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="BulkConn_8cpp_source.html#l00165">CalAkd()</a>.</p>

</div>
</div>
<a id="a31d67e88a223ea350e6dc2df098218ee" name="a31d67e88a223ea350e6dc2df098218ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31d67e88a223ea350e6dc2df098218ee">&#9670;&nbsp;</a></span>CalCFL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> Connection_BB::CalCFL </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &amp;&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate the CFL number of flow between bulks. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00203">203</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>{</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     np   = myBulk.numPhase;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> cfl  = 0;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> temp = 0;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> c = 0; c &lt; numConn; c++) {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span> </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> j = 0; j &lt; np; j++) {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> uId = upblock[c * np + j];</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            <span class="keywordflow">if</span> (myBulk.phaseExist[uId]) {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                temp = fabs(upblock_Velocity[c * np + j]) * dt;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                temp /= myBulk.vj[uId * np + j];</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                <span class="keywordflow">if</span> (cfl &lt; temp) cfl = temp;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            }</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        }</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordflow">return</span> cfl;</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a8f92e38ea4c72ea39dd02f474327ad" name="a1a8f92e38ea4c72ea39dd02f474327ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a8f92e38ea4c72ea39dd02f474327ad">&#9670;&nbsp;</a></span>CalConn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::CalConn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGrid.html">Grid</a> &amp;&#160;</td>
          <td class="paramname"><em>myGrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> &amp;&#160;</td>
          <td class="paramname"><em>np</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup variable related to neighbor. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00038">38</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>{</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     nx   = myGrid.nx;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     ny   = myGrid.ny;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     nz   = myGrid.nz;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> nxny = nx * ny;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// bIdb : begin id in bulk</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="comment">// bIdg : begin id in grid</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="comment">// eIdb : end id in bulk</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="keywordtype">bool</span>    activity;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> eIdb;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bIdb = 0; bIdb &lt; numBulk; bIdb++) {</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bIdg = myGrid.activeMap_B2G[bIdb];</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     k    = bIdg / nxny;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     j    = (bIdg - k * nxny) / nx;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     i    = bIdg - k * nxny - j * nx;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> count = 0;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        <span class="comment">// up</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        <span class="keywordflow">if</span> (k &gt; 0) {</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>            activity = myGrid.activeMap_G2B[bIdg - nxny].GetAct();</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>            <span class="keywordflow">if</span> (activity) {</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>                eIdb = myGrid.activeMap_G2B[bIdg - nxny].GetId();</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>                neighbor[bIdb].push_back(eIdb);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>                count++;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>            }</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        }</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        <span class="comment">// back</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        <span class="keywordflow">if</span> (j &gt; 0) {</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>            activity = myGrid.activeMap_G2B[bIdg - nx].GetAct();</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>            <span class="keywordflow">if</span> (activity) {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>                eIdb = myGrid.activeMap_G2B[bIdg - nx].GetId();</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>                neighbor[bIdb].push_back(eIdb);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>                count++;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>            }</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        }</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        <span class="comment">// left</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        <span class="keywordflow">if</span> (i &gt; 0) {</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>            activity = myGrid.activeMap_G2B[bIdg - 1].GetAct();</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>            <span class="keywordflow">if</span> (activity) {</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>                eIdb = myGrid.activeMap_G2B[bIdg - 1].GetId();</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>                neighbor[bIdb].push_back(eIdb);</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>                count++;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>            }</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        numConn += count;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        <span class="comment">// self</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        neighbor[bIdb].push_back(bIdb);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        selfPtr[bIdb] = count;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        count++;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="comment">// right</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="keywordflow">if</span> (i &lt; nx - 1) {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>            activity = myGrid.activeMap_G2B[bIdg + 1].GetAct();</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>            <span class="keywordflow">if</span> (activity) {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>                eIdb = myGrid.activeMap_G2B[bIdg + 1].GetId();</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>                neighbor[bIdb].push_back(eIdb);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                count++;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>            }</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        }</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <span class="comment">// front</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        <span class="keywordflow">if</span> (j &lt; ny - 1) {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>            activity = myGrid.activeMap_G2B[bIdg + nx].GetAct();</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>            <span class="keywordflow">if</span> (activity) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>                eIdb = myGrid.activeMap_G2B[bIdg + nx].GetId();</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>                neighbor[bIdb].push_back(eIdb);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>                count++;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>            }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        }</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <span class="comment">// down</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <span class="keywordflow">if</span> (k &lt; nz - 1) {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>            activity = myGrid.activeMap_G2B[bIdg + nxny].GetAct();</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>            <span class="keywordflow">if</span> (activity) {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                eIdb = myGrid.activeMap_G2B[bIdg + nxny].GetId();</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>                neighbor[bIdb].push_back(eIdb);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                count++;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>            }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        neighborNum[bIdb] = count;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    upblock.resize(numConn * np);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    upblock_Rho.resize(numConn * np);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    upblock_Trans.resize(numConn * np);</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    upblock_Velocity.resize(numConn * np);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aef278d97aa292fa4ecbb634a545a88b0" name="aef278d97aa292fa4ecbb634a545a88b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef278d97aa292fa4ecbb634a545a88b0">&#9670;&nbsp;</a></span>CalFlux()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::CalFlux </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate main information about flow between bulks. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00223">223</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>{</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="comment">// calculate a step flux using iteratorConn</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bId, eId, uId;</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bId_np_j, eId_np_j;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> Pbegin, Pend, rho;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a>     np = myBulk.numPhase;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> c = 0; c &lt; numConn; c++) {</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        bId         = iteratorConn[c].BId;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        eId         = iteratorConn[c].EId;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> Akd = area[c];</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> j = 0; j &lt; np; j++) {</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>            bId_np_j = bId * np + j;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            eId_np_j = eId * np + j;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>            <span class="keywordtype">bool</span> exbegin = myBulk.phaseExist[bId_np_j];</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>            <span class="keywordtype">bool</span> exend   = myBulk.phaseExist[eId_np_j];</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>            <span class="keywordflow">if</span> ((exbegin) &amp;&amp; (exend)) {</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                Pbegin = myBulk.Pj[bId_np_j];</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                Pend   = myBulk.Pj[eId_np_j];</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                rho    = (myBulk.rho[bId_np_j] + myBulk.rho[eId_np_j]) / 2;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (exbegin &amp;&amp; (!exend)) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                Pbegin = myBulk.Pj[bId_np_j];</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                Pend   = myBulk.P[eId];</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                rho    = myBulk.rho[bId_np_j];</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!exbegin) &amp;&amp; (exend)) {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                Pbegin = myBulk.P[bId];</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                Pend   = myBulk.Pj[eId_np_j];</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                rho    = myBulk.rho[eId_np_j];</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                upblock[c * np + j] = bId;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            uId          = bId;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            <span class="keywordtype">bool</span>    exup = exbegin;</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> dP   = (Pbegin - GRAVITY_FACTOR * rho * myBulk.depth[bId]) -</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                         (Pend - GRAVITY_FACTOR * rho * myBulk.depth[eId]);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            <span class="keywordflow">if</span> (dP &lt; 0) {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                uId  = eId;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                exup = exend;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>            }</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            upblock_Rho[c * np + j] = rho;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>            upblock[c * np + j]     = uId;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> uId_np_j        = uId * np + j;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> trans =</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                CONV1 * CONV2 * Akd * myBulk.kr[uId_np_j] / myBulk.mu[uId_np_j];</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>            upblock_Trans[c * np + j] = trans;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>            <span class="keywordflow">if</span> (exup) {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                upblock_Velocity[c * np + j] = trans * dP;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>                upblock_Velocity[c * np + j] = 0;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    }</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7caa97f3a69a49a6104a474b2155161" name="ad7caa97f3a69a49a6104a474b2155161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7caa97f3a69a49a6104a474b2155161">&#9670;&nbsp;</a></span>CalIteratorConn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::CalIteratorConn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>generate iteratorConn of active connections from neighbor. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00132">132</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>{</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    iteratorConn.reserve(numConn);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// generate iterator for BB from iteratorConn</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bId = 0; bId &lt; numBulk; bId++) {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> beginIt = selfPtr[bId] + 1;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> nbc     = neighborNum[bId];</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> c = beginIt; c &lt; nbc; c++) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> eId = neighbor[bId][c];</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>            iteratorConn.push_back(<a class="code hl_class" href="classBB__Pair.html">BB_Pair</a>(bId, eId));</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    }</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    assert(iteratorConn.size() == numConn);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>}</div>
<div class="ttc" id="aclassBB__Pair_html"><div class="ttname"><a href="classBB__Pair.html">BB_Pair</a></div><div class="ttdef"><b>Definition:</b> <a href="BulkConn_8hpp_source.html#l00027">BulkConn.hpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4c0f85f6bcff384909ff5e7ee40b400" name="ae4c0f85f6bcff384909ff5e7ee40b400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4c0f85f6bcff384909ff5e7ee40b400">&#9670;&nbsp;</a></span>GetBulkNum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> Connection_BB::GetBulkNum </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return num of bulk. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8hpp_source.html#l00057">57</a> of file <a class="el" href="BulkConn_8hpp_source.html">BulkConn.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>{ <span class="keywordflow">return</span> numBulk; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaaeafea1f51353ae916a792af1069ea6" name="aaaeafea1f51353ae916a792af1069ea6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaeafea1f51353ae916a792af1069ea6">&#9670;&nbsp;</a></span>GetConnectionInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::GetConnectionInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print information about connection on screen. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00399">399</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>{</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> i = 0; i &lt; numBulk; i++) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        cout &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>             &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> v : neighbor[i]) {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>            cout &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        }</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; selfPtr[i] &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        cout &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; neighborNum[i];</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> i = 0; i &lt; numConn; i++) {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        cout &lt;&lt; iteratorConn[i].BId &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; iteratorConn[i].EId &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    }</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4dc6c281ce0ce52fc3ae248503aec285" name="a4dc6c281ce0ce52fc3ae248503aec285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc6c281ce0ce52fc3ae248503aec285">&#9670;&nbsp;</a></span>InitAssembleMat()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::InitAssembleMat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSolver.html">Solver</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>mySolver</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Setup sparsity pattern of Matrix, it should be called before every time the linear system setups. actually, part from wells is neglect, which is much less than bulks. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8hpp_source.html#l00128">128</a> of file <a class="el" href="BulkConn_8hpp_source.html">BulkConn.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>{</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    mySolver.dim = numBulk;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> n = 0; n &lt; numBulk; n++) {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        mySolver.colId[n].assign(neighbor[n].begin(), neighbor[n].end());</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        mySolver.diagPtr[n] = selfPtr[n];</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e6c75a707ee687ca153e0761c9b989b" name="a6e6c75a707ee687ca153e0761c9b989b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e6c75a707ee687ca153e0761c9b989b">&#9670;&nbsp;</a></span>InitSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::InitSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize the size of variable related to neighbor. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00028">28</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>{</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    numConn = 0;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    numBulk = myBulk.numBulk;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    neighbor.resize(numBulk);</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    selfPtr.resize(numBulk);</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    neighborNum.resize(numBulk);</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7ba04ea7dca24bcde7b419501c3f338" name="ab7ba04ea7dca24bcde7b419501c3f338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7ba04ea7dca24bcde7b419501c3f338">&#9670;&nbsp;</a></span>MassConserve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::MassConserve </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &amp;&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >update moles of component in each bulk according to mass conserve equations at current timestep. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00284">284</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>{</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> np = myBulk.numPhase;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> nc = myBulk.numCom;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> c = 0; c &lt; numConn; c++) {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> bId = iteratorConn[c].BId;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> eId = iteratorConn[c].EId;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> j = 0; j &lt; np; j++) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> uId = upblock[c * np + j];</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>            <span class="keywordflow">if</span> (!myBulk.phaseExist[uId * np + j]) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a9951229752a2a6a4f40b81a78fad737b">OCP_USI</a> uId_np_j      = uId * np + j;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> phaseVelocity = upblock_Velocity[c * np + j];</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="OCPConst_8hpp.html#a24bc11890ea853a38fd9d6b843633b1b">USI</a> i = 0; i &lt; nc; i++) {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>                <a class="code hl_typedef" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> dNi = dt * phaseVelocity * myBulk.xi[uId_np_j] *</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                              myBulk.cij[uId_np_j * nc + i];</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>                myBulk.Ni[eId * nc + i] += dNi;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>                myBulk.Ni[bId * nc + i] -= dNi;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>            }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        }</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    }</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8599ec24cd2d6b177078ce6ee8c21986" name="a8599ec24cd2d6b177078ce6ee8c21986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8599ec24cd2d6b177078ce6ee8c21986">&#9670;&nbsp;</a></span>Setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Connection_BB::Setup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGrid.html">Grid</a> &amp;&#160;</td>
          <td class="paramname"><em>myGrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classBulk.html">Bulk</a> &amp;&#160;</td>
          <td class="paramname"><em>myBulk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Setup active connections and calculate necessary property from <a class="el" href="classGrid.html">Grid</a> and <a class="el" href="classBulk.html">Bulk</a>. It should be called after <a class="el" href="classGrid.html">Grid</a> and <a class="el" href="classBulk.html">Bulk</a> Setup. </p>

<p class="definition">Definition at line <a class="el" href="BulkConn_8cpp_source.html#l00020">20</a> of file <a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>{</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    <a class="code hl_function" href="classConnection__BB.html#a6e6c75a707ee687ca153e0761c9b989b">InitSize</a>(myBulk);</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    <a class="code hl_function" href="classConnection__BB.html#a1a8f92e38ea4c72ea39dd02f474327ad">CalConn</a>(myGrid, myBulk.numPhase);</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <a class="code hl_function" href="classConnection__BB.html#ad7caa97f3a69a49a6104a474b2155161">CalIteratorConn</a>();</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    <a class="code hl_function" href="classConnection__BB.html#a571788b0cc6cc2d1e212c145d7bbdaf1">CalArea</a>(myGrid, myBulk);</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>}</div>
<div class="ttc" id="aclassConnection__BB_html_a1a8f92e38ea4c72ea39dd02f474327ad"><div class="ttname"><a href="classConnection__BB.html#a1a8f92e38ea4c72ea39dd02f474327ad">Connection_BB::CalConn</a></div><div class="ttdeci">void CalConn(const Grid &amp;myGrid, const USI &amp;np)</div><div class="ttdoc">Setup variable related to neighbor.</div><div class="ttdef"><b>Definition:</b> <a href="BulkConn_8cpp_source.html#l00038">BulkConn.cpp:38</a></div></div>
<div class="ttc" id="aclassConnection__BB_html_a571788b0cc6cc2d1e212c145d7bbdaf1"><div class="ttname"><a href="classConnection__BB.html#a571788b0cc6cc2d1e212c145d7bbdaf1">Connection_BB::CalArea</a></div><div class="ttdeci">void CalArea(const Grid &amp;myGrid, const Bulk &amp;myBulk)</div><div class="ttdoc">calculate all effective area of connections.</div><div class="ttdef"><b>Definition:</b> <a href="BulkConn_8cpp_source.html#l00149">BulkConn.cpp:149</a></div></div>
<div class="ttc" id="aclassConnection__BB_html_a6e6c75a707ee687ca153e0761c9b989b"><div class="ttname"><a href="classConnection__BB.html#a6e6c75a707ee687ca153e0761c9b989b">Connection_BB::InitSize</a></div><div class="ttdeci">void InitSize(const Bulk &amp;myBulk)</div><div class="ttdoc">initialize the size of variable related to neighbor.</div><div class="ttdef"><b>Definition:</b> <a href="BulkConn_8cpp_source.html#l00028">BulkConn.cpp:28</a></div></div>
<div class="ttc" id="aclassConnection__BB_html_ad7caa97f3a69a49a6104a474b2155161"><div class="ttname"><a href="classConnection__BB.html#ad7caa97f3a69a49a6104a474b2155161">Connection_BB::CalIteratorConn</a></div><div class="ttdeci">void CalIteratorConn()</div><div class="ttdoc">generate iteratorConn of active connections from neighbor.</div><div class="ttdef"><b>Definition:</b> <a href="BulkConn_8cpp_source.html#l00132">BulkConn.cpp:132</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="BulkConn_8cpp_source.html#l00149">CalArea()</a>, <a class="el" href="BulkConn_8cpp_source.html#l00038">CalConn()</a>, <a class="el" href="BulkConn_8cpp_source.html#l00132">CalIteratorConn()</a>, and <a class="el" href="BulkConn_8cpp_source.html#l00028">InitSize()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a9207bec5c987e07946dc1af861cd98c0" name="a9207bec5c987e07946dc1af861cd98c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9207bec5c987e07946dc1af861cd98c0">&#9670;&nbsp;</a></span>Solver&lt; OCP_DBL &gt;</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classSolver.html">Solver</a>&lt; <a class="el" href="OCPConst_8hpp.html#a2c355586809161c6f4c3a35ebfa7cb1f">OCP_DBL</a> &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BulkConn_8hpp_source.html#l00039">39</a> of file <a class="el" href="BulkConn_8hpp_source.html">BulkConn.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BulkConn_8hpp_source.html">BulkConn.hpp</a></li>
<li><a class="el" href="BulkConn_8cpp_source.html">BulkConn.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
